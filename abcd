private boolean showAddMoreColumn = false;  // Flag to control the visibility of the "ADD" button column

private List<LineItem> getMatchingProductIds(List<LineItem> items) {
    LOG.debug("MySubscriptionModel :: getMatchingProductIds :: Start");

    items.forEach((curItem) -> {
        try {
            String productLineName = curItem.getProductLine().getName();

            // Mock data for specific test cases
            if ("TestProduct1".equals(productLineName)) {
                // Case 1: Product in Ravenera Category, no expiration date
                curItem.setWithinCategory(true);
                curItem.setPrice("100 USD");
                curItem.setIsAvailableInWhiteList(true);  // Show "ADD" button
                showAddMoreColumn = true;  // Ensure "ADD" column is shown

            } else if ("TestProduct2".equals(productLineName)) {
                // Case 2: Product in Ravenera Category with expiration date
                curItem.setWithinCategory(true);
                curItem.setPrice("200 USD");
                curItem.setIsAvailableInWhiteList(false);  // Hide "ADD" button

            } else if ("NonRaveneraProduct".equals(productLineName)) {
                // Case 3: Product not in Ravenera Category
                curItem.setWithinCategory(false);
                curItem.setPrice("300 USD");
                curItem.setIsAvailableInWhiteList(false);  // Hide "ADD" button

            } else {
                // Real data handling for other products
                ErpProductInfo productInfo = erpProductService.findErpProductInfo(
                    curItem.getPartNumber().getPrimaryKeys().get(PART_ID)
                );

                if (productInfo != null) {
                    String reveneraProductCategory = productInfo.getReveneraProductCategory();

                    // Set isAvailableInWhiteList based on real product category
                    if (reveneraProductCategory != null && reveneraProductCategory.equals(productLineName)) {
                        curItem.setWithinCategory(true);
                        String price = getPricingInformation(productInfo);
                        curItem.setPrice(price);
                        curItem.setIsAvailableInWhiteList(true);  // Mark as in whitelist
                        showAddMoreColumn = true;  // Show "ADD" column if at least one product is in whitelist
                    } else {
                        curItem.setIsAvailableInWhiteList(false);
                    }
                } else {
                    curItem.setIsAvailableInWhiteList(false);
                }
            }
        } catch (Exception e) {
            LOG.error("MySubscriptionModel :: getMatchingProductIds :: Error :: {}", e);
        }
    });

    LOG.debug("MySubscriptionModel :: getMatchingProductIds :: End");
    return items;
}

// Getter method for showAddMoreColumn to use in the frontend template
public boolean isShowAddMoreColumn() {
    return showAddMoreColumn;
}
